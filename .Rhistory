Date
Date <- as.Date(Date, '%Y/%m/%d')
Date
Date="1991/08/06"
Date <- as.Date(Date, '%Y/%m/%d')
Date
Date+1
Date+10
Date+40
gsub("-","",Date)
articles=as_search(q="immigration", begin_date =gsub("-","",Date) , end_date = '2016 131',page = 0,fl="lead_paragraph,abstract,headline,source",facet_feild="section_name,document_type,type_of_material",hl=TRUE)
articles=as_search(q="immigration", begin_date ='gsub("-","",Date)' , end_date = '2016 131',page = 0,fl="lead_paragraph,abstract,headline,source",facet_feild="section_name,document_type,type_of_material",hl=TRUE)
articles=as_search(q="immigration", begin_date ='gsub("-","",Date)' , end_date = '20160131',page = 0,fl="lead_paragraph,abstract,headline,source",facet_feild="section_name,document_type,type_of_material",hl=TRUE)
'gsub("-","",Date)'
gsub("-","",Date)
articles=as_search(q="immigration", begin_date =gsub("-","",Date) , end_date = "20160131",page = 0,fl="lead_paragraph,abstract,headline,source",facet_feild="section_name,document_type,type_of_material",hl=TRUE)
articles
runif(1,0,10)
ceil(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
as.integer(runif(1,0,10))
365/7
k=ceil(runif(1,1,52))
k=as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
as.integer(runif(1,1,52))
k<- sample(1:52, 10, replace=F)
k
Date_vec=rep(NA,25*7*10)
for (i in 1:25)
Date_vec
Date_vec=rep(NA,2*7*10)
for (i in 1:2)
Date_vec
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_vec=Date+(k*7)
}
Date=Date+1
}
Date_vec
Date_mat=matrix(NA,70,nrow=7)
Date_mat
Date_mat=matrix(NA,10,nrow=7)
Date_mat
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_mat[j,k]=Date+(k*7)
}
Date=Date+1
}
Date_mat
Date="1991/08/06"
Date
Date+7
Date <- as.Date(Date, '%Y/%m/%d')
Date
Date+2
Date+28
Date="1991/08/06"
Date <- as.Date(Date, '%Y/%m/%d')
Date_mat=matrix(NA,10,nrow=7)
for (i in 1:2)
{
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_mat[j,k]=as.Date(Date+(k*7))
}
Date=Date+1
}
Date=Date+(365*i)
}
articles=as_search(q="immigration", begin_date =gsub("-","",Date) , end_date = "20160131",page = 0,fl="lead_paragraph,abstract,headline,source",facet_feild="section_name,document_type,type_of_material",hl=TRUE)
Date="1991/08/06"
Date <- as.Date(Date, '%Y/%m/%d')
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_mat[j,k]=as.Date(Date+(k*7))
}
Date=Date+1
}
Date_mat=matrix(NA,10,nrow=7)
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_mat[j,k]=as.Date(Date+(k*7))
}
Date=Date+1
}
Date_mat
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_mat[j,k]=as.Date(Date+(x*7))
}
Date=Date+1
}
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_mat[j,k]=as.Date(Date+(x[k]*7))
}
Date=Date+1
}
Date_mat
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_mat[j,k]=format(Date+(x[k]*7), format="%Y/%m/%d")
}
Date=Date+1
}
Date_mat
Date="1991/01/01"
Date <- as.Date(Date, '%Y/%m/%d')
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_mat[j,k]=format(Date+(x[k]*7), format="%Y/%m/%d")
}
Date=Date+1
}
Date_mat
Date="2016/01/01"
Date <- as.Date(Date, '%Y/%m/%d')
for (j in 1:7)
{
for (k in 1:10)
{
x<- sample(1:52, 10, replace=F)
Date_mat[j,k]=format(Date+(x[k]*7), format="%Y/%m/%d")
}
Date=Date+1
}
Date_mat
df=as.data.frame(cbind(1:10,25:35,10:20))
25:35
df=as.data.frame(cbind(1:10,25:34,10:19))
df
ggplot(df)+geom_bar(aes(x=V1, y=V2, col=Category),stat="identity",position = "dodge")
library(ggplot2)
ggplot(df)+geom_bar(aes(x=V1, y=V2, col=Category),stat="identity",position = "dodge")
ggplot(df)+geom_bar(aes(x=V1, y=V2, col="red"),stat="identity",position = "dodge")
ggplot(df)+geom_bar(aes(x=V1, y=V2, fill="red"),stat="identity",position = "dodge")
ggplot(df)+geom_bar(aes(x=V1, y=V2, fill="red"),stat="identity",position = "dodge")+geom_bar(aes(x=V1, y=V3, fill="blue"),stat="identity",position = "dodge")
ggplot(df)+geom_bar(aes(x=V1, y=V2, fill="red"),stat="identity",position = "dodge")+geom_bar(aes(x=V1, y=V3, fill="blue",stat="identity",position = "dodge"))
ggplot(df)+geom_bar(aes(x=V1, y=V2, fill="red",stat="identity",position = "dodge"))+geom_bar(aes(x=V1, y=V3, fill="blue",stat="identity",position = "dodge"))
ggplot(df)+geom_bar(aes(x=V1, y=V2), fill="red",stat="identity",position = "dodge")+geom_bar(aes(x=V1, y=V3), fill="blue",stat="identity",position = "dodge")
ggplot(df)+geom_bar(aes(x=V1, y=V2), fill="red",stat="identity",position = "dodge")+geom_bar(aes(x=V1, y=V3), fill="blue",stat="identity")
ggplot(df)+geom_bar(aes(x=V1, y=V2), fill="red",stat="identity")+geom_bar(aes(x=V1, y=V3), fill="blue",stat="identity")
ggplot(df)+geom_bar(aes(x=factor(V1), y=V2), fill="red",stat="identity")+geom_bar(aes(x=factor(V1), y=V3), fill="blue",stat="identity")
ggplot(df,aes(x=factor(V1), y=V2), fill="red")+geom_bar(stat="identity",position = "dodge")+geom_bar(aes(x=factor(V1), y=V3), fill="blue",stat="identity")
ggplot(df,aes(x=V1, y=V2), fill="red")+geom_bar(stat="identity",position = "dodge")+geom_bar(aes(x=V1, y=V3), fill="blue",stat="identity")
+position_dodge()
ggplot(df,aes(x=V1, y=V2), fill="red")+geom_bar(stat="identity",position = "dodge")+geom_bar(aes(x=V1, y=V3), fill="blue",stat="identity")+position_dodge()
ggplot(df,aes(x=V1, y=V2), fill="red")+geom_bar(stat="bin",position = "dodge")+geom_bar(aes(x=V1, y=V3), fill="blue",stat="identity")+position_dodge()
ggplot(df,aes(x=V1, y=V2), fill="red")+geom_bar(stat="bin",position = "dodge")+geom_bar(aes(x=V1, y=V3), fill="blue",stat="identity")
ggplot(df)+geom_bar(aes(x=V1, y=V2), fill="red",stat="bin",position = "dodge")+geom_bar(aes(x=V1, y=V3), fill="blue",stat="identity")
df1=as.data.frame(cbind(1:10,25:34))
df2=as.data.frame(cbind(1:10,10:19))
df=rbind(df1,df2)
df
df1=as.data.frame(cbind(1:10,25:34))
df1$cat=rep(10,"max")
df2=as.data.frame(cbind(1:10,10:19))
df2$cat=rep(10,"min")
df=rbind(df1,df2)
df1=as.data.frame(cbind(1:10,25:34))
df1$cat="max"
df2=as.data.frame(cbind(1:10,10:19))
df2$cat="min"
df=rbind(df1,df2)
df
names(df)
ggplot(df)+geom_bar(aes(x=V1, y=V2), fill=cat,stat="identity",position = "dodge")
ggplot(df)+geom_bar(aes(x=V1, y=V2, fill=cat),stat="identity",position = "dodge")
9/14
2/3
library(rtimes)
Sys.setenv(NYTIMES_AS_KEY = "4e7c325c6f1d44849eff1dbe583e265c")
articles=as_search(q="immigration immigrant Alien", begin_date =gsub("-","",Date) ,
end_date = "20160131",page = 0,fl="lead_paragraph,abstract,headline,source",
facet_feild="section_name,document_type,type_of_material",hl=TRUE)
articles
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 0,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,keywords,document_type,word_count",
facet_feild="section_name,document_type,type_of_material,day_of_week",hl=TRUE)
articles
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,keywords,document_type,word_count",
facet_feild="section_name,document_type,type_of_material,day_of_week",hl=TRUE)
articles
names(articles)
articles$meta
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_feild="section_name,document_type,type_of_material,day_of_week",hl=TRUE)
names(articles$copyright)
names(articles$meta)
names(articles$data)
names(articles$data$meta)
names(articles$data$docs)
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,document_type,type_of_material,day_of_week",hl=TRUE)
articles$data$docs
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,document_type,type_of_material,day_of_week",hl=TRUE)
articles
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,document_type,type_of_material",hl=TRUE)
articles
date=rep(NA,10)
date
date=rep(NA,10)
web_url=rep(NA,10)
snippet=rep(NA,10)
lead_paragraph=rep(NA,10)
abstract=rep(NA,10)
headline=rep(NA,10)
document_type=rep(NA,10)
word_count=rep(NA,10)
section_name=rep(NA,10)
type_of_material=rep(NA,10)
for (i in 1:10)
{
date[i]=begin_date
web_url[i]=articles$data$docs[[i]]$web_url
snippet[i]=articles$data$docs[[i]]$snippet
lead_paragraph[i]=articles$data$docs[[i]]$lead_paragraph
abstract[i]=articles$data$docs[[i]]$abstract
headline[i]=articles$data$docs[[i]]$headline$main
document_type[i]=articles$data$docs[[i]]$document_type
word_count[i]=articles$data$docs[[i]]$word_count
section_name[i]=articles$data$facets$section_name$terms[[i]]$term
type_of_material[i]=articles$data$facets$type_of_material$terms[[i]]$term
}
begin_date ="20160101"
date=rep(NA,10)
web_url=rep(NA,10)
snippet=rep(NA,10)
lead_paragraph=rep(NA,10)
abstract=rep(NA,10)
headline=rep(NA,10)
document_type=rep(NA,10)
word_count=rep(NA,10)
section_name=rep(NA,10)
type_of_material=rep(NA,10)
for (i in 1:10)
{
date[i]=begin_date
web_url[i]=articles$data$docs[[i]]$web_url
snippet[i]=articles$data$docs[[i]]$snippet
lead_paragraph[i]=articles$data$docs[[i]]$lead_paragraph
abstract[i]=articles$data$docs[[i]]$abstract
headline[i]=articles$data$docs[[i]]$headline$main
document_type[i]=articles$data$docs[[i]]$document_type
word_count[i]=articles$data$docs[[i]]$word_count
section_name[i]=articles$data$facets$section_name$terms[[i]]$term
type_of_material[i]=articles$data$facets$type_of_material$terms[[i]]$term
}
articles$data$docs[[10]]$abstract
articles$data$docs[[1]]$abstract
articles$data$docs[[3]]$abstract
articles$data$docs[[4]]$abstract
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,type_of_material",hl=TRUE)
begin_date ="20160101"
date=rep(NA,10)
web_url=rep(NA,10)
snippet=rep(NA,10)
lead_paragraph=rep(NA,10)
abstract=rep(NA,10)
headline=rep(NA,10)
document_type=rep(NA,10)
word_count=rep(NA,10)
section_name=rep(NA,10)
type_of_material=rep(NA,10)
for (i in 1:10)
{
date[i]=begin_date
web_url[i]=articles$data$docs[[i]]$web_url
snippet[i]=articles$data$docs[[i]]$snippet
lead_paragraph[i]=articles$data$docs[[i]]$lead_paragraph
abstract[i]=articles$data$docs[[i]]$abstract
headline[i]=articles$data$docs[[i]]$headline$main
document_type[i]=articles$data$docs[[i]]$document_type
word_count[i]=articles$data$docs[[i]]$word_count
section_name[i]=articles$data$facets$section_name$terms[[i]]$term
type_of_material[i]=articles$data$facets$type_of_material$terms[[i]]$term
}
articles
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,type_of_material",hl=TRUE)
begin_date ="20160101"
date=rep(NA,10)
web_url=rep(NA,10)
snippet=rep(NA,10)
lead_paragraph=rep(NA,10)
abstract=rep(NA,10)
headline=rep(NA,10)
document_type=rep(NA,10)
word_count=rep(NA,10)
section_name=rep(NA,10)
type_of_material=rep(NA,10)
for (i in 1:10)
{
date[i]=c(begin_date)
web_url[i]=c(articles$data$docs[[i]]$web_url)
snippet[i]=c(articles$data$docs[[i]]$snippet)
lead_paragraph[i]=c(articles$data$docs[[i]]$lead_paragraph)
abstract[i]=c(articles$data$docs[[i]]$abstract)
headline[i]=c(articles$data$docs[[i]]$headline$main)
document_type[i]=c(articles$data$docs[[i]]$document_type)
word_count[i]=c(articles$data$docs[[i]]$word_count)
section_name[i]=c(articles$data$facets$section_name$terms[[i]]$term)
type_of_material[i]=c(articles$data$facets$type_of_material$terms[[i]]$term)
}
date=c(rep(NA,10))
date
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,type_of_material",hl=TRUE)
begin_date ="20160101"
date=c(rep(NA,10))
web_url=c(rep(NA,10))
snippet=rep(NA,10)
lead_paragraph=rep(NA,10)
abstract=c(rep(NA,10))
headline=rep(NA,10)
document_type=rep(NA,10)
word_count=rep(NA,10)
section_name=rep(NA,10)
type_of_material=rep(NA,10)
for (i in 1:10)
{
date[i]=begin_date
web_url[i]=articles$data$docs[[i]]$web_url
snippet[i]=articles$data$docs[[i]]$snippet
lead_paragraph[i]=articles$data$docs[[i]]$lead_paragraph
abstract[i]=articles$data$docs[[i]]$abstract
headline[i]=articles$data$docs[[i]]$headline$main
document_type[i]=articles$data$docs[[i]]$document_type
word_count[i]=articles$data$docs[[i]]$word_count
section_name[i]=articles$data$facets$section_name$terms[[i]]$term
type_of_material[i]=articles$data$facets$type_of_material$terms[[i]]$term
}
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,type_of_material",hl=TRUE)
begin_date ="20160101"
date=c(rep(NA,10))
web_url=c(rep(NA,10))
snippet=rep(NA,10)
lead_paragraph=rep(NA,10)
abstract=c(rep(NA,10))
headline=rep(NA,10)
document_type=rep(NA,10)
word_count=rep(NA,10)
section_name=rep(NA,10)
type_of_material=rep(NA,10)
for (i in 1:10)
{
date[i]=begin_date
web_url[i]=articles$data$docs[[i]]$web_url
snippet[i]=articles$data$docs[[i]]$snippet
lead_paragraph[i]=articles$data$docs[[i]]$lead_paragraph
c(abstract[i])=articles$data$docs[[i]]$abstract
headline[i]=articles$data$docs[[i]]$headline$main
document_type[i]=articles$data$docs[[i]]$document_type
word_count[i]=articles$data$docs[[i]]$word_count
section_name[i]=articles$data$facets$section_name$terms[[i]]$term
type_of_material[i]=articles$data$facets$type_of_material$terms[[i]]$term
}
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,type_of_material",hl=TRUE)
begin_date ="20160101"
date=c(rep(NA,10))
web_url=c(rep(NA,10))
snippet=rep(NA,10)
lead_paragraph=rep(NA,10)
abstract=c(rep(NA,10))
headline=rep(NA,10)
document_type=rep(NA,10)
word_count=rep(NA,10)
section_name=rep(NA,10)
type_of_material=rep(NA,10)
for (i in 1:10)
{
date[i]=begin_date
web_url[i]=articles$data$docs[[i]]$web_url
snippet[i]=articles$data$docs[[i]]$snippet
lead_paragraph[i]=articles$data$docs[[i]]$lead_paragraph
abstract[i]=ifelse(is.null(articles$data$docs[[i]]$abstract),"NA",articles$data$docs[[i]]$abstract)
headline[i]=articles$data$docs[[i]]$headline$main
document_type[i]=articles$data$docs[[i]]$document_type
word_count[i]=articles$data$docs[[i]]$word_count
section_name[i]=articles$data$facets$section_name$terms[[i]]$term
type_of_material[i]=articles$data$facets$type_of_material$terms[[i]]$term
}
abstract[1]=ifelse(is.null(articles$data$docs[[1]]$abstract),"NA",articles$data$docs[[1]]$abstract)
abstract[1]
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,type_of_material",hl=TRUE)
begin_date ="20160101"
date=c(rep(NA,10))
web_url=c(rep(NA,10))
snippet=rep(NA,10)
lead_paragraph=rep(NA,10)
abstract=c(rep(NA,10))
headline=rep(NA,10)
document_type=rep(NA,10)
word_count=rep(NA,10)
section_name=rep(NA,10)
type_of_material=rep(NA,10)
for (i in 1:10)
{
date[i]=begin_date
web_url[i]=ifelse(is.null(articles$data$docs[[i]]$web_url),"NA",articles$data$docs[[i]]$web_url)
snippet[i]=ifelse(is.null(articles$data$docs[[i]]$snippet),"NA",articles$data$docs[[i]]$snippet)
lead_paragraph[i]=ifelse(is.null(articles$data$docs[[i]]$lead_paragraph),"NA",articles$data$docs[[i]]$lead_paragraph)
abstract[i]=ifelse(is.null(articles$data$docs[[i]]$abstract),"NA",articles$data$docs[[i]]$abstract)
headline[i]=ifelse(is.null(articles$data$docs[[i]]$headline$main),"NA",articles$data$docs[[i]]$headline$main)
document_type[i]=ifelse(is.null(articles$data$docs[[i]]$document_type),"NA",articles$data$docs[[i]]$document_type)
word_count[i]=ifelse(is.null(articles$data$docs[[i]]$word_count),"NA",articles$data$docs[[i]]$word_count)
section_name[i]=ifelse(is.null(articles$data$facets$section_name$terms[[i]]$term),"NA",articles$data$facets$section_name$terms[[i]]$term)
type_of_material[i]=ifelse(is.null(articles$data$facets$type_of_material$terms[[i]]$term),"NA",articles$data$facets$type_of_material$terms[[i]]$term)
}
articles$data$facets$section_name$terms[[10]]$term
articles$data$facets$section_name$terms[[5]]$term
articles=as_search(q="immigration", begin_date ="20160101" , end_date = "20160131",page = 1,
fl="web_url,snippet,lead_paragraph,abstract,headline,source,document_type,word_count",
facet_field="section_name,type_of_material",hl=TRUE)
begin_date ="20160101"
date=c(rep(NA,10))
web_url=c(rep(NA,10))
snippet=rep(NA,10)
lead_paragraph=rep(NA,10)
abstract=c(rep(NA,10))
headline=rep(NA,10)
document_type=rep(NA,10)
word_count=rep(NA,10)
section_name=rep(NA,10)
type_of_material=rep(NA,10)
for (i in 1:10)
{
date[i]=begin_date
web_url[i]=ifelse(is.null(articles$data$docs[[i]]$web_url),"NA",articles$data$docs[[i]]$web_url)
snippet[i]=ifelse(is.null(articles$data$docs[[i]]$snippet),"NA",articles$data$docs[[i]]$snippet)
lead_paragraph[i]=ifelse(is.null(articles$data$docs[[i]]$lead_paragraph),"NA",articles$data$docs[[i]]$lead_paragraph)
abstract[i]=ifelse(is.null(articles$data$docs[[i]]$abstract),"NA",articles$data$docs[[i]]$abstract)
headline[i]=ifelse(is.null(articles$data$docs[[i]]$headline$main),"NA",articles$data$docs[[i]]$headline$main)
document_type[i]=ifelse(is.null(articles$data$docs[[i]]$document_type),"NA",articles$data$docs[[i]]$document_type)
word_count[i]=ifelse(is.null(articles$data$docs[[i]]$word_count),"NA",articles$data$docs[[i]]$word_count)
#section_name[i]=ifelse(is.null(articles$data$facets$section_name$terms[[i]]$term),"NA",articles$data$facets$section_name$terms[[i]]$term)
#type_of_material[i]=ifelse(is.null(articles$data$facets$type_of_material$terms[[i]]$term),"NA",articles$data$facets$type_of_material$terms[[i]]$term)
}
date
web_url
snippet
